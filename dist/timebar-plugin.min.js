!function(e,t){e&&!e.getElementById("livereloadscript")&&((t=e.createElement("script")).async=1,t.src="//"+(self.location.host||"localhost").split(":")[0]+":35729/livereload.js?snipver=1",t.id="livereloadscript",e.getElementsByTagName("head")[0].appendChild(t))}(self.document),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).TimebarPlugin=t()}(this,(function(){"use strict";class e{options={};element=null;startTime=null;endTime=null;callback=null;constructor(e,t={}){if(!e)throw new Error("Element is required");if(!(e instanceof HTMLElement))throw new Error("Element should be a valid HTMLElement");if(!this.#e(t)&&!this.#t(e))throw new Error("Start time and end time are required");this.startTime=this.#i(e.dataset.startTime??t.startTime),this.endTime=this.#i(e.dataset.endTime??t.endTime),this.callback=t.callback,this.options=t,this.element=e,this.#n(),this.element.addEventListener("click",this.calculateTimebarSelectedTime(this.startTime,this.endTime))}#e(e){return e.startTime&&e.endTime}#t(e){return e.dataset.startTime||e.dataset.endTime}#i(e){const t=/(\d{2}):(\d{2})\s*(AM|PM|am|pm)?/g.exec(e);if(!t)throw new Error("Invalid time format");let i=+t[1],n=+t[2],s=t[3];return s&&"pm"===s.toLowerCase()&&12!==i?i+=12:s&&"am"===s.toLowerCase()&&12===i&&(i=0),{hours:i,minutes:n}}calculateTimebarSelectedTime(e,t){return i=>{const n=i.currentTarget.getBoundingClientRect(),s=n.width,r=(i.clientX-n.left)/s*100;let a,l;const o=(60*t.hours+t.minutes-(60*e.hours+e.minutes))*r/100,d=60*e.hours+e.minutes+o;a=Math.floor(d/60),l=Math.round(d%60);const m=l%15;m<8?l-=m:l+=15-m,this.callback({hour:a,minutes:l}),console.log({hour:a,minutes:l})}}#n(){const e=document.createElement("div");e.classList.add("timebar");const t=document.createElement("div");t.classList.add("ruler");for(let e=this.startTime.hours;e<=this.endTime.hours;e++){const i=document.createElement("div");i.classList.add("timebar__hour"),i.textContent=`${e}:00`,t.appendChild(i)}this.element.appendChild(t),this.element.appendChild(e)}}return new e(document.querySelector(".timebar-container"),{is12Hours:!1,callback:e=>{alert(`Selected time is ${e.hour}:${e.minutes}`)}}),{Timebar:e}}));
