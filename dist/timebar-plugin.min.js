!function(e,t){e&&!e.getElementById("livereloadscript")&&((t=e.createElement("script")).async=1,t.src="//"+(self.location.host||"localhost").split(":")[0]+":35729/livereload.js?snipver=1",t.id="livereloadscript",e.getElementsByTagName("head")[0].appendChild(t))}(self.document),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).TimebarPlugin=t()}(this,(function(){"use strict";class e{options={};element=null;startTime=null;endTime=null;callback=null;timebar=null;constructor(e,t={}){if(!e)throw new Error("Element is required");if(!(e instanceof HTMLElement))throw new Error("Element should be a valid HTMLElement");if(!this.#e(t)&&!this.#t(e))throw new Error("Start time and end time are required");this.startTime=this.#i(e.dataset.startTime??t.startTime),this.endTime=this.#i(e.dataset.endTime??t.endTime),this.callback=t.callback,this.options=t,this.element=e,this.#s(),this.element.addEventListener("click",this.calculateTimebarSelectedTime(this.startTime,this.endTime))}#e(e){return e.startTime&&e.endTime}#t(e){return e.dataset.startTime||e.dataset.endTime}#i(e){const t=/(\d{2}):(\d{2})\s*(AM|PM|am|pm)?/g.exec(e);if(!t)throw new Error("Invalid time format");let i=+t[1],s=+t[2],n=t[3];return n&&"pm"===n.toLowerCase()&&12!==i?i+=12:n&&"am"===n.toLowerCase()&&12===i&&(i=0),{hours:i,minutes:s}}calculateTimebarSelectedTime(e,t){return i=>{const s=i.currentTarget.getBoundingClientRect(),n=s.width,r=(i.clientX-s.left)/n*100;let o,a;const l=(60*t.hours+t.minutes-(60*e.hours+e.minutes))*r/100,d=60*e.hours+e.minutes+l;o=Math.floor(d/60),a=Math.round(d%60);const m=a%15;m<8?a-=m:a+=15-m,this.callback({hour:o,minutes:a}),console.log({hour:o,minutes:a})}}addEvent(e){const t=this.#i(e.startTime),i=this.#i(e.endTime),s=60*i.hours+i.minutes-(60*t.hours+t.minutes),n=document.createElement("div"),r=this.timebar.getBoundingClientRect().width,o=r/(this.endTime.hours-this.startTime.hours),a=o*(s/60);console.log({totalWidth:r,hourWidth:o,eventWidth:a}),n.classList.add("timebar__event"),n.style.position="absolute",n.style.left=(t.hours-this.startTime.hours)*o+"px",n.style.width=`${a}px`,n.style.height="100%",n.style.backgroundColor=e.color,this.timebar.appendChild(n)}#s(){const e=document.createElement("div");e.classList.add("timebar"),this.timebar=e;const t=document.createElement("div");t.classList.add("ruler");for(let e=this.startTime.hours;e<=this.endTime.hours;e++){const i=document.createElement("div");i.classList.add("timebar__hour"),i.textContent=`${e}:00`,t.appendChild(i)}this.element.appendChild(t),this.element.appendChild(e)}}const t=new e(document.querySelector(".timebar-container"),{is12Hours:!1,callback:e=>{alert(`Selected time is ${e.hour}:${e.minutes}`)}});return t.addEvent({startTime:"02:00",endTime:"05:00",color:"red"}),t.addEvent({startTime:"06:00",endTime:"07:00",color:"blue"}),{Timebar:e}}));
